# ThreatWeaver Environment Variables
# Copy this file to .env and fill in your values
# DO NOT commit .env to version control!

# ============================================
# ENVIRONMENT
# ============================================
ENVIRONMENT=development
NODE_ENV=development
LOG_LEVEL=INFO

# ============================================
# DATABASE (PostgreSQL)
# ============================================
POSTGRES_USER=threatweaver
POSTGRES_PASSWORD=changeme
POSTGRES_DB=threatweaver
DATABASE_URL=postgresql://threatweaver:changeme@postgres:5432/threatweaver

# ============================================
# REDIS (Task Queue & Caching)
# ============================================
REDIS_URL=redis://redis:6379/0

# ============================================
# MINIO / S3 (Object Storage)
# ============================================
MINIO_ROOT_USER=minio
MINIO_ROOT_PASSWORD=changeme123
S3_ENDPOINT=http://minio:9000
S3_ACCESS_KEY=minio
S3_SECRET_KEY=changeme123
S3_BUCKET=threatweaver-workspace

# ============================================
# JWT AUTHENTICATION
# ============================================
# Generate with: openssl rand -hex 32
JWT_SECRET=your-secret-key-change-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=60

# ============================================
# NEXTAUTH (Frontend Auth)
# ============================================
# Generate with: openssl rand -base64 32
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your-nextauth-secret-change-in-production

# ============================================
# LLM API KEYS
# ============================================
# OpenAI (GPT-4, GPT-4o-mini)
OPENAI_API_KEY=sk-...

# Anthropic (Claude 3 Opus, Sonnet)
ANTHROPIC_API_KEY=sk-ant-...

# Optional: Ollama (local LLM fallback)
OLLAMA_BASE_URL=http://localhost:11434

# ============================================
# STRIPE (Payments)
# ============================================
# Get keys from: https://dashboard.stripe.com/test/apikeys
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# ============================================
# NOTIFICATIONS
# ============================================
# Slack (for HITL approval notifications)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/...
SLACK_CHANNEL=#threatweaver-approvals

# Email (SendGrid)
SENDGRID_API_KEY=SG....
FROM_EMAIL=noreply@threatweaver.com

# PagerDuty (for alerts)
PAGERDUTY_API_KEY=...
PAGERDUTY_SERVICE_ID=...

# ============================================
# MONITORING & OBSERVABILITY
# ============================================
# Sentry (Error Tracking)
SENTRY_DSN=https://...@sentry.io/...

# LangSmith (LLM Tracing) - Optional
LANGSMITH_API_KEY=...
LANGSMITH_PROJECT=threatweaver

# ============================================
# DOCKER SANDBOXING
# ============================================
# Resource limits for security tools
DOCKER_CPU_LIMIT=2
DOCKER_MEMORY_LIMIT=4g
DOCKER_NETWORK_BANDWIDTH=10m
DOCKER_TIMEOUT=3600

# ============================================
# FEATURE FLAGS
# ============================================
ENABLE_SIGNUP=true
ENABLE_OAUTH=false
ENABLE_SSO=false
ENABLE_DIFF_DETECTION=true
ENABLE_HITL_APPROVAL=true

# ============================================
# RATE LIMITING
# ============================================
AUTH_RATE_LIMIT=10  # attempts per minute
API_RATE_LIMIT=100  # requests per minute per user
SCAN_RATE_LIMIT=10  # scans per hour per team

# ============================================
# SUBSCRIPTION TIERS (for testing)
# ============================================
# Free tier limits
FREE_SCANS_PER_MONTH=10
FREE_DATA_RETENTION_DAYS=7

# Pro tier limits
PRO_SCANS_PER_MONTH=100
PRO_DATA_RETENTION_DAYS=90
PRO_PRICE=9900  # $99.00 in cents

# Enterprise tier limits
ENTERPRISE_SCANS_PER_MONTH=999999
ENTERPRISE_DATA_RETENTION_DAYS=365
ENTERPRISE_PRICE=49900  # $499.00 in cents
